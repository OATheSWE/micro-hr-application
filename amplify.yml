version: 1
frontend:
  phases:
    preBuild:
      commands:
         - curl -fsSL https://get.pnpm.io/install.sh | sh -
         - export PATH="$HOME/.local/share/pnpm:$PATH"
         - pnpm install --no-frozen-lockfile
    build:
      commands:
        - NEXTJS_IGNORE_ESLINT=true NEXTJS_IGNORE_TS_ERRORS=true pnpm run build
  artifacts:
    baseDirectory: .next
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
      - .pnpm-store
